//>>built
define("kso/views/PlanCreate","dojo/ready,dojo/on,dojo/_base/declare,dojo/topic,dojo/_base/lang,dojo/_base/event,dojo/string,dojo/dom,dojo/dom-class,dojo/date,dijit/registry,dijit/form/Form,dojox/layout/TableContainer,dojox/mobile/View,dojox/mobile/ScrollableView,dojox/mobile/ListItem,dojox/mobile/EdgeToEdgeStoreList,dojox/mobile/TextBox,dojox/mobile/Heading,dojox/mobile/ToolBarButton,dojox/mobile/TabBar,dojox/mobile/TabBarButton,dojox/mobile/Slider,dojox/mobile/Switch,dojox/mobile/Button,dojox/mobile/DatePicker,dojox/mobile/ValuePicker,dojox/mobile/ValuePickerSlot,dojox/mobile/ComboBox,dojo/store/Memory,moch/app/mobile,moch/app/util,kso/TabBar,kso/SimpleDialog".split(","),
function(B,C,p,j,g,q,D,E,r,s,F,t,u,v,w,G,H,h,k,d,I,J,K,L,M,x,l,m,N,O,y,z,A,i){return p([v],{id:"kso_plancreate_view",_form:null,_item:null,_date_start:null,_do_in_days:null,_do_success:null,postCreate:function(){var f=this,b=new i,a;b.confirm("Hj\u00e6lp til handleplan",'Siden viser oprettelse af handleplan.<br /><br />Angiv hvor sikker du er p\u00e5 handleplanen med skala fra en til ti.<br /><br />Tryk p\u00e5 "aktiv/sluk" knappen for at aktivere handleplan.<br /><br />Tryk p\u00e5 "Gem" knappen for at oprette en handleplan.');
this.addChild(b);var e=new i;e.confirm("Hj\u00e6lp til vurdering af succes","Du b\u00f8r v\u00e6rer mere sikker p\u00e5 din handleplan.<br/ ><br/ >Vurderingen b\u00f8r ligger p\u00e5 minimum syv.<br/ ><br/ >Juster venligst igen.");this.addChild(e);a=new i;a.datePicker("V\u00e6lg en start dato","_date_start");this.addChild(a);a=new i;a.sliderPicker();this.addChild(a);sview=new w;a=new k({label:"Opret handleplan","class":"headingPlan"});var n=new d({icon:"/kso/kso/images/btn_back.png","class":"toolBarButton",
style:{"float":"left"},moveTo:"kso_home_view"});a.addChild(n);a.addChild(new d({icon:"/kso/kso/images/btn_help.png","class":"toolBarButton",style:{"float":"right"},onClick:function(){b.show()}}));a.addChild(new d({icon:"/kso/kso/images/btn_action.png","class":"toolBarButton",style:{"float":"right"},onClick:function(){r.toggle("headingActionPlanCreate","headingAction-closed");f.resize()}}));this.addChild(a);a=new k({id:"headingActionPlanCreate",baseClass:"headingActionPlan"});var o=new d({label:"Annuller",
moveTo:"kso_planlist_view",transition:"slide",transitionDir:-1});a.addChild(o);a.addChild(new d({label:"Gem",onClick:g.hitch(this,this.onSubmit)}));this.addChild(a);a=new u({orientation:"vert"});this._date_start=new x({name:"date_start",label:"Start dato?"});a.addChild(this._date_start);var c=new l({label:"Hvor mange dage (1-21)?"});this._do_in_days=new m({labelFrom:1,labelTo:21,style:{width:"40px"},value:7});c.addChild(this._do_in_days);a.addChild(c);c=new h({name:"do_what",label:"Hvad?","class":"mochInput",
placeHolder:"fx. G\u00e5 en tur rundt om boligblokken",trim:!0});a.addChild(c);c=new h({name:"do_how_much",label:"Hvor meget?","class":"mochInput",placeHolder:"fx. 3 gange",trim:!0});a.addChild(c);c=new h({name:"do_when",label:"Hvorn\u00e5r?","class":"mochInput",placeHolder:"fx. F\u00f8r frokost",trim:!0});a.addChild(c);c=new h({name:"do_how_often",label:"Hvor ofte?","class":"mochInput",placeHolder:"fx. 3 gange om ugen",trim:!0});a.addChild(c);c=new l({label:"Vurdering for succes (0-10)?",onValueChanged:function(){7>
f._do_success.get("value")&&e.show()}});this._do_success=new m({labelFrom:0,labelTo:10,style:{width:"40px"},value:10});c.addChild(this._do_success);a.addChild(c);this._form=new t;this._form.domNode.appendChild(a.domNode);sview.addChild(this._form);this.addChild(sview);this.addChild(new A);j.subscribe("plan/create",g.hitch(this,function(a,b){n.set("moveTo",a.id);o.set("moveTo",a.id);this._item=g.clone(b);b&&(this._item.do_what+=" KOPI");this._form.set("value",this._item);a.performTransition("kso_plancreate_view",
1,"slide")}))},onSubmit:function(f){q.stop(f);var f=y.getInstance().getStore("kso_plan","kso_plan"),b=this._form.get("value"),b=g.mixin(this._item,b);b.active=!0;b.do_in_days=this._do_in_days.get("value");b.do_success=this._do_success.get("value");b.diary_include=!0;b.diary=[];for(var a=new Date(this._date_start.get("value")),e=0;e<parseInt(b.do_in_days);e++){var d=z.date_to_iso(s.add(a,"day",e));b.diary.push({use_at:d})}f.add(b);j.publish("plan/list",this)},onStartView:function(){}})});